{% extends "base.html" %}

{% block title %}{{ name }} - Routine{% endblock %}

{% block content_title %}{{ name }}{% endblock %}

{% block content %}
<div class="container mx-2">
    <form action="{{ url_for('routine_view', name=name) }}" method="post">
        {% for i, exercise, set_count in routine %}
        <div class="field">
            <label class="label">E{{ i }}</label>
            <div class="field-body is-grouped">
                <div class="field">
                    <input class="input" type="text" list="exercises" name="exercise" value="{{ exercise }}" placeholder="{{ exercise }}" />
                </div>
                <div class="field">
                    <input class="input" type="number" name="set_count" value="{{ set_count }}" placeholder="{{ set_count }}" min="0" />
                </div>
            </div>
        </div>
        {% endfor %}
        <div class="field">
            <label class="label">Add exercise</label>
            <div class="field-body is-grouped">
                <div class="field">
                    <input class="input" type="text" list="exercises" name="exercise" value="{{ exercise }}" placeholder="Exercise name" />
                </div>
                <div class="field">
                    <input class="input" type="number" name="set_count" value="{{ set_count }}" placeholder="Number of sets" min="0" />
                </div>
            </div>
        </div>
        <div class="field">
            <label class="label">Notes</label>
            <textarea class="textarea" name="notes">{{ notes }}</textarea>
        </div>
        <div class="level is-mobile mt-4">
            <div class="level-left">
                <input class="button is-success" type="submit" value="Save" />
            </div>
            <div class="level-right">
                <span class="button is-danger">
                    <label class="checkbox">
                        <input type="checkbox" name="delete" /> Delete
                    </label>
                </span>
            </div>
        </div>
    </form>
</div>
<div class="container has-text-centered mt-6">
    <form action="{{ url_for('routine_view', name=name) }}" method="post">
        <input class="input" style="width: 40%" type="text" name="rename" value="{{ name }}" required="required" />
        <input class="button is-success" style="width: 25%" type="submit" value="Rename" />
    </form>
</div>
<div class="container has-text-centered mt-3">
    <form action="{{ url_for('routine_view', name=name) }}" method="post">
        <input class="input" style="width: 40%" type="text" name="copy" value="{{ name }}" required="required" />
        <input class="button is-success" style="width: 25%" type="submit" value="Copy" />
    </form>
</div>
{% if workouts %}
<div class="container mt-6">
    <h1 class="title">Workouts</h1>
    <ul>
        {% for workout_id, workout_date in workouts %}
        <li><a href="{{ url_for('workout_view', workout_id=workout_id) }}">{{ workout_date }}</a></li>
        {% endfor %}
    </ul>
</div>
{% endif %}
<datalist id="exercises">
    {% for name in exercises|sort %}
    <option value="{{ name }}">
    {% endfor %}
</datalist>
{% endblock %}

{% set parent_page = 'routines_view' %}
